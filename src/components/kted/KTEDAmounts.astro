---
import type { Lang } from '../../utils/languages';

interface Props {
  lang?: Lang;
  variant?: string;
}

const { lang = 'es', variant = 'a' } = Astro.props;
const translations = await import(`../../../public/locales/${lang}.json`);
const t = (k: string) => translations.default[k] || k;

// Variant-specific headers
const variantHeaders = {
  a: {
    label: ({ es: 'Subvenciones', gl: 'Subvenciones', en: 'Grants' }[lang]),
    title: t('kted.amounts.title'),
    subtitle: t('kted.amounts.subtitle')
  },
  b: {
    label: ({ es: 'Financiación disponible', gl: 'Financiación disponible', en: 'Available funding' }[lang]),
    title: ({ es: 'Aprovecha antes de que se agoten', gl: 'Aprovecha antes de que se agoten', en: 'Take advantage before they run out' }[lang]),
    subtitle: ({ es: 'Fondos europeos con plazas limitadas - actúa ahora', gl: 'Fondos europeos con plazas limitadas - actúa ahora', en: 'European funds with limited spots - act now' }[lang])
  },
  c: {
    label: ({ es: 'Tu inversión', gl: 'Tu inversión', en: 'Your investment' }[lang]),
    title: ({ es: '¿Cuánto puedes conseguir?', gl: '¿Cuánto puedes conseguir?', en: 'How much can you get?' }[lang]),
    subtitle: ({ es: 'Calcula el retorno para tu empresa', gl: 'Calcula el retorno para tu empresa', en: 'Calculate the return for your company' }[lang])
  }
};

const header = variantHeaders[variant as 'a' | 'b' | 'c'] || variantHeaders.a;
---

<section class="py-20 md:py-28 bg-white">
  <div class="max-w-7xl mx-auto px-6 md:px-12">
    <!-- Header -->
    <div class="text-center mb-14">
      <p class="text-sm tracking-[0.2em] uppercase text-gray-400 mb-5">
        {header.label}
      </p>
      <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-black mb-6">
        {header.title}
      </h2>
      <p class="text-lg md:text-xl text-gray-500 max-w-2xl mx-auto">
        {header.subtitle}
      </p>
    </div>

    <!-- Cards grid - bento style -->
    <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
      <!-- Empresas card -->
      <div class="bg-white border border-gray-200 hover:border-gray-300 transition-colors">
        <div class="p-8 border-b border-gray-100">
          <span class="text-sm font-semibold tracking-[0.15em] uppercase text-gray-400">
            {t('kted.amounts.empresas.title')}
          </span>
        </div>
        <div class="p-8 space-y-8">
          <!-- Participante -->
          <div class="flex items-center justify-between">
            <div>
              <p class="font-semibold text-black text-lg">{t('kted.amounts.empresas.participante.label')}</p>
              <p class="text-base text-gray-400">{({ es: 'Comparte datos en el ecosistema', gl: 'Comparte datos en el ecosistema', en: 'Share data in the ecosystem' }[lang])}</p>
            </div>
            <p class="text-3xl font-bold text-black">
              €30.000
            </p>
          </div>
          <div class="h-px bg-gray-100"></div>
          <!-- Proveedor -->
          <div class="flex items-center justify-between">
            <div>
              <p class="font-semibold text-black text-lg">{t('kted.amounts.empresas.proveedor.label')}</p>
              <p class="text-base text-gray-400">{({ es: 'Aporta servicios técnicos', gl: 'Aporta servicios técnicos', en: 'Provides technical services' }[lang])}</p>
            </div>
            <p class="text-4xl font-bold text-black">
              €30.000
            </p>
          </div>
        </div>
      </div>

      <!-- AAPP card -->
      <div class="bg-black text-white">
        <div class="p-8 border-b border-white/10">
          <span class="text-sm font-semibold tracking-[0.15em] uppercase text-white/50">
            {t('kted.amounts.aapp.title')}
          </span>
        </div>
        <div class="p-8 space-y-8">
          <!-- Participante -->
          <div class="flex items-center justify-between">
            <div>
              <p class="font-semibold text-white text-lg">{t('kted.amounts.aapp.participante.label')}</p>
              <p class="text-base text-white/40">{({ es: 'Integración institucional', gl: 'Integración institucional', en: 'Institutional integration' }[lang])}</p>
            </div>
            <p class="text-3xl font-bold text-white">
              €25.000
            </p>
          </div>
          <div class="h-px bg-white/10"></div>
          <!-- Proveedor -->
          <div class="flex items-center justify-between">
            <div>
              <p class="font-semibold text-white text-lg">{t('kted.amounts.aapp.proveedor.label')}</p>
              <p class="text-base text-white/40">{({ es: 'Infraestructura de datos', gl: 'Infraestructura de datos', en: 'Data infrastructure' }[lang])}</p>
            </div>
            <p class="text-4xl font-bold text-white">
              €50.000
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Note -->
    <div class="mt-14 flex justify-center">
      <div class="inline-flex items-center gap-4 px-8 py-5 bg-black text-white">
        <svg class="w-6 h-6 text-green-500 flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
          <polyline points="22 4 12 14.01 9 11.01"/>
        </svg>
        <span class="font-medium text-base">{t('kted.amounts.note')}</span>
      </div>
    </div>
  </div>
</section>
