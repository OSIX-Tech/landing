---
import type { Lang } from '../../../utils/languages';

interface Props {
  lang?: Lang;
  variant?: string;
}

const { lang = 'es', variant = 'a' } = Astro.props;
const translations = await import(`../../../../public/locales/${lang}.json`);
const t = (k: string) => translations.default[k] || k;
---

<section id="home" class="relative min-h-[calc(100vh-80px)] bg-white flex items-center overflow-hidden" data-variant={variant}>
  <!-- Architectural grid background -->
  <div class="absolute inset-0 opacity-30" style="background-image: linear-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px), linear-gradient(to right, rgba(0, 0, 0, 0.03) 1px, transparent 1px); background-size: 80px 80px;"></div>

  <!-- Diagonal accent line -->
  <div class="hero-diagonal absolute top-0 right-0 w-1 bg-black origin-top-right" style="height: 200vh; transform: rotate(-35deg) translateX(50vw);"></div>

  <div class="relative z-10 w-full max-w-7xl mx-auto px-6 md:px-12 py-12 md:py-20">

    <!-- Top bar: Badge + Funding source -->
    <div class="hero-a-element flex flex-col sm:flex-row sm:items-center justify-between mb-12 md:mb-16 gap-4">
      <div class="flex items-center gap-4">
        <div class="w-3 h-3 bg-black animate-pulse"></div>
        <span class="text-xs font-bold tracking-[0.25em] uppercase text-black">{t('kted.hero.badge')}</span>
      </div>
      <div class="flex items-center gap-2 text-gray-400">
        <span class="text-xs tracking-wider">Red.es</span>
        <span class="w-4 h-px bg-gray-300"></span>
        <span class="text-xs tracking-wider">NextGenerationEU</span>
      </div>
    </div>

    <div class="grid lg:grid-cols-12 gap-8 lg:gap-12 items-start">

      <!-- Left content: 7 columns -->
      <div class="lg:col-span-7">
        <!-- Eyebrow with line -->
        <div class="hero-a-element flex items-center gap-6 mb-6">
          <div class="w-16 h-px bg-black hero-line-grow"></div>
          <p class="text-gray-500 text-sm tracking-wide">
            {({ es: 'Subvención a fondo perdido', gl: 'Subvención a fondo perdido', en: 'Non-refundable grant' }[lang])}
          </p>
        </div>

        <!-- THE NUMBER - Massive, unmissable -->
        <div class="hero-a-element relative mb-6">
          <span class="hero-number flex items-baseline whitespace-nowrap text-[48px] sm:text-[80px] md:text-[120px] lg:text-[160px] font-black text-black leading-none tracking-tighter">
            <span>30</span><span class="text-gray-300">.</span><span>000</span><span class="text-[32px] sm:text-[56px] md:text-[84px] lg:text-[112px] font-bold ml-1 sm:ml-2">€</span>
          </span>
          <!-- Subtle underline accent -->
          <div class="absolute -bottom-2 left-0 h-2 bg-black hero-underline-grow" style="width: 40%;"></div>
        </div>

        <!-- Subtitle -->
        <p class="hero-a-element text-gray-600 text-lg md:text-xl lg:text-2xl max-w-xl mb-10 leading-relaxed">
          {({ es: 'Para integrar tu empresa en los Espacios de Datos europeos.', gl: 'Para integrar tu empresa en los Espacios de Datos europeos.', en: 'To integrate your company into European Data Spaces.' }[lang])}
          <span class="text-black font-semibold">
            {({ es: ' Tú solo pagas el IVA.', gl: ' Tú solo pagas el IVA.', en: ' You only pay VAT.' }[lang])}
          </span>
        </p>

        <!-- CTAs -->
        <div class="hero-a-element flex flex-col sm:flex-row gap-4 mb-12">
          <a
            href="#contact"
            class="kted-cta btn-primary btn-arrow px-8 py-5 text-lg justify-center"
            data-cta-location="hero"
            data-variant={variant}
          >
            <span>{t('kted.hero.cta')}</span>
            <svg class="btn-arrow-icon w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
            </svg>
          </a>
          <a
            href="#how-it-works"
            class="btn-secondary px-6 py-5 text-lg justify-center"
          >
            <span>{({ es: 'Cómo funciona', gl: 'Cómo funciona', en: 'How it works' }[lang])}</span>
          </a>
        </div>

        <!-- Trust metrics - horizontal -->
        <div class="hero-a-element flex items-center gap-8 md:gap-12">
          <div class="group">
            <span class="block text-3xl md:text-4xl font-bold text-black transition-transform duration-300 group-hover:scale-110">+50</span>
            <span class="text-gray-400 text-xs uppercase tracking-wider">{({ es: 'Proyectos', gl: 'Proyectos', en: 'Projects' }[lang])}</span>
          </div>
          <div class="w-px h-12 bg-gray-200"></div>
          <div class="group">
            <span class="block text-3xl md:text-4xl font-bold text-black transition-transform duration-300 group-hover:scale-110">100%</span>
            <span class="text-gray-400 text-xs uppercase tracking-wider">{({ es: 'Éxito', gl: 'Éxito', en: 'Success' }[lang])}</span>
          </div>
          <div class="w-px h-12 bg-gray-200"></div>
          <div class="group">
            <span class="block text-3xl md:text-4xl font-bold text-black transition-transform duration-300 group-hover:scale-110">24h</span>
            <span class="text-gray-400 text-xs uppercase tracking-wider">{({ es: 'Respuesta', gl: 'Respuesta', en: 'Response' }[lang])}</span>
          </div>
        </div>
      </div>

      <!-- Right: Floating black card - 5 columns -->
      <div class="lg:col-span-5 hero-a-card">
        <div class="relative">
          <!-- Shadow layer for depth -->
          <div class="absolute inset-0 bg-black/10 transform translate-x-4 translate-y-4"></div>

          <!-- Main card -->
          <div class="relative bg-black text-white p-8 md:p-10">
            <!-- Corner accent -->
            <div class="absolute top-0 right-0 w-16 h-16 border-t-2 border-r-2 border-white/20"></div>

            <h3 class="text-lg font-bold tracking-wide uppercase mb-8 flex items-center gap-3">
              <span class="w-8 h-px bg-white/40"></span>
              {({ es: 'Sin riesgo', gl: 'Sin riesgo', en: 'Zero risk' }[lang])}
            </h3>

            <ul class="space-y-6">
              <li class="flex items-start gap-4 group">
                <div class="flex-shrink-0 w-8 h-8 border border-white/30 flex items-center justify-center transition-all duration-300 group-hover:bg-white group-hover:border-white">
                  <svg class="w-4 h-4 text-white transition-colors duration-300 group-hover:text-black" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/>
                  </svg>
                </div>
                <div>
                  <p class="text-white font-semibold text-lg">{({ es: '100% subvencionado', gl: '100% subvencionado', en: '100% subsidized' }[lang])}</p>
                  <p class="text-white/50 text-sm">{({ es: 'Red.es nos paga directamente', gl: 'Red.es nos paga directamente', en: 'Red.es pays us directly' }[lang])}</p>
                </div>
              </li>
              <li class="flex items-start gap-4 group">
                <div class="flex-shrink-0 w-8 h-8 border border-white/30 flex items-center justify-center transition-all duration-300 group-hover:bg-white group-hover:border-white">
                  <svg class="w-4 h-4 text-white transition-colors duration-300 group-hover:text-black" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/>
                  </svg>
                </div>
                <div>
                  <p class="text-white font-semibold text-lg">{({ es: '0€ de adelanto', gl: '0€ de adelanto', en: '€0 upfront' }[lang])}</p>
                  <p class="text-white/50 text-sm">{({ es: 'Solo abonas el IVA', gl: 'Solo abonas el IVA', en: 'You only pay VAT' }[lang])}</p>
                </div>
              </li>
              <li class="flex items-start gap-4 group">
                <div class="flex-shrink-0 w-8 h-8 border border-white/30 flex items-center justify-center transition-all duration-300 group-hover:bg-white group-hover:border-white">
                  <svg class="w-4 h-4 text-white transition-colors duration-300 group-hover:text-black" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/>
                  </svg>
                </div>
                <div>
                  <p class="text-white font-semibold text-lg">{({ es: 'Gestión integral', gl: 'Gestión integral', en: 'Full management' }[lang])}</p>
                  <p class="text-white/50 text-sm">{({ es: 'Solicitud + ejecución + justificación', gl: 'Solicitud + ejecución + justificación', en: 'Application + execution + justification' }[lang])}</p>
                </div>
              </li>
            </ul>

            <!-- Bottom accent -->
            <div class="mt-10 pt-8 border-t border-white/10">
              <div class="flex items-center gap-3">
                <img src="/logo_w.png" alt="OSIX Tech" class="h-8 w-auto" />
                <div>
                  <p class="text-white/40 text-xs">{({ es: 'Partner certificado Red.es', gl: 'Partner certificado Red.es', en: 'Certified Red.es partner' }[lang])}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Initial states */
  .hero-a-element, .hero-a-card {
    opacity: 0;
    transform: translateY(30px);
  }

  .hero-diagonal {
    opacity: 0;
    transform: rotate(-35deg) translateX(50vw) scaleY(0);
  }

  .hero-line-grow {
    transform: scaleX(0);
    transform-origin: left;
  }

  .hero-underline-grow {
    transform: scaleX(0);
    transform-origin: left;
  }

  .hero-number {
    clip-path: inset(0 100% 0 0);
  }

  /* Animations on load complete */
  body.loading-complete .hero-diagonal {
    animation: diagonalReveal 1.2s cubic-bezier(0.16, 1, 0.3, 1) 0.1s forwards;
  }

  body.loading-complete .hero-a-element:nth-child(1) {
    animation: fadeSlideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.2s forwards;
  }

  body.loading-complete .hero-a-element:nth-child(2) {
    animation: fadeSlideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.3s forwards;
  }

  body.loading-complete .hero-a-element:nth-child(3) {
    animation: fadeSlideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.4s forwards;
  }

  body.loading-complete .hero-a-element:nth-child(4) {
    animation: fadeSlideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.5s forwards;
  }

  body.loading-complete .hero-a-element:nth-child(5) {
    animation: fadeSlideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.6s forwards;
  }

  body.loading-complete .hero-a-element:nth-child(6) {
    animation: fadeSlideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.7s forwards;
  }

  body.loading-complete .hero-a-card {
    animation: fadeSlideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.5s forwards;
  }

  body.loading-complete .hero-number {
    animation: numberReveal 1s cubic-bezier(0.16, 1, 0.3, 1) 0.4s forwards;
  }

  body.loading-complete .hero-line-grow {
    animation: lineGrow 0.6s cubic-bezier(0.16, 1, 0.3, 1) 0.3s forwards;
  }

  body.loading-complete .hero-underline-grow {
    animation: lineGrow 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.8s forwards;
  }

  @keyframes fadeSlideUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes diagonalReveal {
    from {
      opacity: 0;
      transform: rotate(-35deg) translateX(50vw) scaleY(0);
    }
    to {
      opacity: 0.1;
      transform: rotate(-35deg) translateX(50vw) scaleY(1);
    }
  }

  @keyframes numberReveal {
    from {
      clip-path: inset(0 100% 0 0);
    }
    to {
      clip-path: inset(0 0% 0 0);
    }
  }

  @keyframes lineGrow {
    from {
      transform: scaleX(0);
    }
    to {
      transform: scaleX(1);
    }
  }

  /* Responsive adjustments */
  @media (max-width: 1024px) {
    .hero-diagonal {
      display: none;
    }
  }
</style>
